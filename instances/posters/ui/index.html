<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Poster Memento - Browser</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>Poster Memento</h1>
      <p class="subtitle">Browse and search your poster collection</p>
      <div class="search-bar">
        <input type="text" id="search-input" placeholder="Search posters by title, artist, venue...">
        <select id="search-strategy">
          <option value="hybrid">Hybrid Search</option>
          <option value="graph">Graph Search</option>
          <option value="vector">Semantic Search</option>
        </select>
        <button id="search-btn">Search</button>
        <button id="clear-btn" class="secondary">Clear</button>
      </div>
    </header>

    <!-- Tab Navigation -->
    <nav class="tabs">
      <button class="tab-btn active" data-tab="browse">Browse Collection</button>
      <button class="tab-btn" data-tab="processing">Process Images</button>
      <button class="tab-btn" data-tab="database">Database</button>
      <button class="tab-btn" data-tab="qa-validation">QA Validation</button>
    </nav>

    <main>
      <!-- Browse Tab (existing content) -->
      <div id="browse-tab" class="tab-content">
      <div class="controls">
        <div class="left-controls">
          <select id="limit-select">
            <option value="10">10 per page</option>
            <option value="25">25 per page</option>
            <option value="50">50 per page</option>
          </select>
          <span class="total-info">Total: <span id="total-count">0</span> posters</span>
        </div>
        <div class="pagination">
          <button id="prev-btn" disabled>Previous</button>
          <span id="page-info">Page 1</span>
          <button id="next-btn">Next</button>
        </div>
      </div>

      <div id="loading" class="loading hidden">
        <div class="spinner"></div>
        <p>Loading posters...</p>
      </div>

      <div id="error" class="error hidden">
        <p id="error-message"></p>
        <button id="retry-btn">Retry</button>
      </div>

      <div class="table-container">
        <table id="poster-table" class="poster-table">
          <thead>
            <tr>
              <th class="th-thumbnail">Image</th>
              <th class="th-name sortable" data-sort="name">Name <span class="sort-icon"></span></th>
              <th class="th-type sortable" data-sort="poster_type">Type <span class="sort-icon"></span></th>
              <th class="th-artists">People</th>
              <th class="th-venue sortable" data-sort="venue_name">Venue <span class="sort-icon"></span></th>
              <th class="th-date sortable" data-sort="event_date">Date <span class="sort-icon"></span></th>
              <th class="th-added sortable active desc" data-sort="createdAt">Added <span class="sort-icon"></span></th>
              <th class="th-row-actions">Actions</th>
            </tr>
          </thead>
          <tbody id="poster-tbody">
            <!-- Poster rows rendered here -->
          </tbody>
        </table>
      </div>

      <!-- Empty State (shown when no posters) -->
      <div id="empty-state" class="empty-state hidden">
        <h3>No posters found</h3>
        <p>Try a different search term or add some posters to get started.</p>
      </div>

      <!-- Detail Modal -->
      <div id="poster-modal" class="modal hidden">
        <div class="modal-content">
          <button class="modal-close" id="modal-close">&times;</button>
          <div id="poster-detail">
            <!-- Single poster detail view -->
          </div>
        </div>
      </div>

      <!-- Image Lightbox Modal -->
      <div id="lightbox-modal" class="lightbox hidden">
        <div class="lightbox-backdrop"></div>
        <div class="lightbox-content">
          <button class="lightbox-close" id="lightbox-close">&times;</button>
          <img id="lightbox-image" src="" alt="">
          <div id="lightbox-caption" class="lightbox-caption"></div>
        </div>
      </div>
      </div><!-- End Browse Tab -->

      <!-- Processing Tab -->
      <div id="processing-tab" class="tab-content hidden">
        <!-- Workflow Info -->
        <div class="workflow-info">
          <div class="workflow-steps">
            <div class="workflow-step" data-step="1">
              <span class="step-number">1</span>
              <span class="step-label">Select Session</span>
            </div>
            <div class="workflow-arrow">‚Üí</div>
            <div class="workflow-step" data-step="2">
              <span class="step-number">2</span>
              <span class="step-label">Upload Images</span>
            </div>
            <div class="workflow-arrow">‚Üí</div>
            <div class="workflow-step" data-step="3">
              <span class="step-number">3</span>
              <span class="step-label">Select & Process</span>
            </div>
            <div class="workflow-arrow">‚Üí</div>
            <div class="workflow-step" data-step="4">
              <span class="step-number">4</span>
              <span class="step-label">Live Folder</span>
            </div>
          </div>
        </div>

        <!-- ===== STEP 1: SESSION SELECTION ===== -->
        <div class="phase-container" id="phase-session">
          <h2 class="phase-header"><span class="phase-number">1</span> Select or Create Session</h2>

          <section class="processing-section session-section">
            <div class="session-controls">
              <select id="session-select" class="session-select">
                <option value="">Loading sessions...</option>
              </select>
              <button type="button" id="new-session-btn" class="secondary-btn">+ New Session</button>
              <input type="text" id="new-session-name" class="session-name-input hidden" placeholder="Enter session name...">
              <textarea id="new-session-desc" class="session-desc-input hidden" placeholder="Optional description..." rows="2"></textarea>
              <button type="button" id="create-session-btn" class="process-btn hidden">Create</button>
              <button type="button" id="reprocess-session-btn" class="secondary-btn hidden">Reprocess</button>
              <button type="button" id="repair-dates-btn" class="secondary-btn hidden">Repair Dates</button>
              <button type="button" id="delete-session-btn" class="danger-btn" disabled>Delete Session</button>
            </div>
            <div class="session-stats">
              <span>Session images: <strong id="session-image-count">0</strong></span>
            </div>
            <div id="session-description" class="session-description hidden"></div>
          </section>
        </div>

        <!-- ===== STEP 2: UPLOAD TO SESSION ===== -->
        <div class="phase-container hidden" id="upload-section">
          <h2 class="phase-header"><span class="phase-number">2</span> Upload Images to Session</h2>

          <section class="processing-section upload-browse-section">
            <h3><span class="icon">üìÅ</span> Browse Local Folder</h3>
            <div class="upload-controls">
              <button type="button" id="browse-btn" class="process-btn">Browse Local Folder</button>
              <span class="folder-path">Selected: <strong id="local-folder-path">None</strong></span>
              <span class="file-count">(<strong id="local-file-count">0</strong> images)</span>
            </div>
          </section>

          <section class="processing-section file-browser-section">
            <h3><span class="icon">üñºÔ∏è</span> Local Files</h3>
            <div class="filter-controls">
              <input type="text" id="local-file-filter" placeholder="Filter by filename..." class="filter-input">
            </div>
            <div class="file-controls">
              <div class="selection-actions">
                <button type="button" id="select-all-local-btn">Select All</button>
                <button type="button" id="select-filtered-local-btn">Select Filtered</button>
                <button type="button" id="deselect-all-local-btn">Clear</button>
              </div>
              <span class="selection-info">Selected: <strong id="selected-local-count">0</strong> <span id="local-filter-stats" class="filter-stats-inline hidden">(showing <strong id="local-filtered-count">0</strong> of <strong id="local-total-count">0</strong>)</span></span>
            </div>
            <div class="file-list" id="local-file-list">
              <div class="file-list-empty">
                <p>No local folder selected</p>
                <p>Click "Browse Local Folder" to select images</p>
              </div>
            </div>
          </section>

          <section class="processing-section actions-section upload-actions">
            <button type="button" id="upload-to-session-btn" class="process-btn" disabled>
              <span class="btn-icon">‚¨ÜÔ∏è</span> Upload Selected to Session
            </button>
            <div id="upload-progress" class="upload-progress hidden">
              <div class="upload-progress-bar">
                <div id="upload-progress-fill" class="upload-progress-fill"></div>
              </div>
              <span id="upload-progress-text" class="upload-progress-text">Uploading files...</span>
            </div>
          </section>
        </div>

        <!-- ===== STEP 3: SELECT IMAGES FOR PROCESSING ===== -->
        <div class="phase-container hidden" id="session-images-section">
          <h2 class="phase-header"><span class="phase-number">3</span> Select Images for Processing</h2>

          <section class="processing-section session-images-browser">
            <div class="session-images-header">
              <h3><span class="icon">üñºÔ∏è</span> Session Images</h3>
              <button type="button" id="refresh-session-btn" class="secondary-btn">Refresh</button>
            </div>
            <div class="filter-controls">
              <input type="text" id="image-filter" placeholder="Filter by filename..." class="filter-input">
            </div>
            <div class="file-controls">
              <div class="selection-actions">
                <button type="button" id="select-all-images-btn">Select All</button>
                <button type="button" id="deselect-all-images-btn">Clear</button>
              </div>
              <span class="selection-info">Selected: <strong id="selected-image-count">0</strong> of <strong id="total-session-images">0</strong></span>
            </div>
            <div class="image-grid" id="session-image-list">
              <div class="file-list-empty">
                <p>No images in session</p>
                <p>Upload images using the section above</p>
              </div>
            </div>
          </section>
        </div>

        <!-- ===== STEP 4: PROCESS ===== -->
        <div class="phase-container hidden" id="process-section">
          <h2 class="phase-header"><span class="phase-number">4</span> Process</h2>

          <section class="processing-section config-section">
            <h3><span class="icon">‚öôÔ∏è</span> Processing Options</h3>
            <div class="config-grid">
              <label>
                Vision Model
                <select id="model-select">
                  <option value="">Loading models...</option>
                </select>
              </label>
              <label>
                Batch Size
                <select id="batch-size-select">
                  <option value="1">1 (Test)</option>
                  <option value="5" selected>5</option>
                  <option value="10">10</option>
                  <option value="25">25</option>
                </select>
              </label>
            </div>

            <!-- Consensus Mode -->
            <div class="consensus-toggle-row">
              <label class="checkbox-label">
                <input type="checkbox" id="consensus-toggle">
                Consensus Mode
              </label>
              <span class="consensus-hint">Run multiple models and merge results</span>
            </div>

            <div id="consensus-options" class="consensus-options hidden">
              <div class="consensus-models-section">
                <label>Models to Compare</label>
                <div id="consensus-model-list" class="consensus-model-list">
                  <p class="text-muted">Loading models...</p>
                </div>
              </div>
              <label>
                Agreement Threshold
                <select id="consensus-agreement">
                  <option value="0.5" selected>Majority (50%)</option>
                  <option value="0.66">Two-thirds (66%)</option>
                  <option value="1.0">Unanimous (100%)</option>
                </select>
              </label>
            </div>
          </section>

          <section class="processing-section actions-section">
            <button type="button" id="process-selected-btn" class="process-btn" disabled>
              <span class="btn-icon">üîç</span> Process Selected
            </button>
            <button type="button" id="process-all-btn" class="secondary-btn" disabled>
              Process All in Session
            </button>
            <p class="process-info">Successfully processed images will move to the Live folder</p>
          </section>
        </div>

        <!-- Progress Section (shown during processing) -->
        <section id="progress-section" class="processing-section progress-section hidden">
          <h2><span class="icon">‚è≥</span> Processing Progress</h2>

          <!-- Simple Pipeline: Download ‚Üí Extract ‚Üí Store ‚Üí Complete -->
          <div class="pipeline-stages">
            <div class="pipeline-stage" data-stage="download" id="stage-download">
              <div class="stage-indicator">
                <div class="stage-icon">üì•</div>
                <div class="stage-status"></div>
              </div>
              <div class="stage-label">Download</div>
            </div>
            <div class="pipeline-connector"></div>
            <div class="pipeline-stage" data-stage="extract" id="stage-extract">
              <div class="stage-indicator">
                <div class="stage-icon">üîç</div>
                <div class="stage-status"></div>
              </div>
              <div class="stage-label">Extract</div>
            </div>
            <div class="pipeline-connector"></div>
            <div class="pipeline-stage" data-stage="store" id="stage-store">
              <div class="stage-indicator">
                <div class="stage-icon">üìä</div>
                <div class="stage-status"></div>
              </div>
              <div class="stage-label">Store</div>
            </div>
            <div class="pipeline-connector"></div>
            <div class="pipeline-stage" data-stage="complete" id="stage-complete">
              <div class="stage-indicator">
                <div class="stage-icon">‚úÖ</div>
                <div class="stage-status"></div>
              </div>
              <div class="stage-label">Live</div>
            </div>
          </div>

          <!-- Progress Details -->
          <div class="stage-details">
            <div class="stage-details-header">
              <span class="stage-details-title" id="stage-details-title">Initializing...</span>
              <span class="stage-details-progress" id="stage-details-progress"></span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="progress-stats">
              <span>Progress: <strong id="progress-percent">0%</strong></span>
              <span>Processed: <strong id="progress-processed">0</strong></span>
              <span class="succeeded">Moved to Live: <strong id="progress-succeeded">0</strong></span>
              <span class="failed">Failed: <strong id="progress-failed">0</strong></span>
            </div>
          </div>

          <!-- Activity Log -->
          <div class="activity-log-container">
            <div class="activity-log-header">
              <span>Activity Log</span>
              <button type="button" id="toggle-log-btn" class="toggle-btn">Hide</button>
            </div>
            <div class="progress-log" id="progress-log"></div>
          </div>

          <!-- Error Summary (shown after processing if failures occurred) -->
          <div id="error-summary" class="error-summary hidden"></div>

          <div class="progress-actions">
            <button type="button" id="cancel-processing-btn" class="secondary-btn">Cancel Processing</button>
            <button type="button" id="new-run-btn" class="process-btn hidden">New Run</button>
          </div>
        </section>
      </div><!-- End Processing Tab -->

      <!-- Database Tab -->
      <div id="database-tab" class="tab-content hidden">
        <!-- Database Statistics -->
        <section class="processing-section database-overview-section">
          <h2><span class="icon">üóÑÔ∏è</span> Database Management</h2>
          <p class="section-description">Manage knowledge graph storage, backups, and resets</p>

          <div class="database-stats-grid">
            <div class="db-stat-card">
              <div class="db-stat-icon">üìä</div>
              <div class="db-stat-value" id="db-entities">-</div>
              <div class="db-stat-label">Entities</div>
            </div>
            <div class="db-stat-card">
              <div class="db-stat-icon">üîó</div>
              <div class="db-stat-value" id="db-relationships">-</div>
              <div class="db-stat-label">Relationships</div>
            </div>
            <div class="db-stat-card">
              <div class="db-stat-icon">üß†</div>
              <div class="db-stat-value" id="db-embeddings">-</div>
              <div class="db-stat-label">Embeddings</div>
            </div>
            <div class="db-stat-card">
              <div class="db-stat-icon">üñºÔ∏è</div>
              <div class="db-stat-value" id="db-live-images">-</div>
              <div class="db-stat-label">Live Images</div>
            </div>
          </div>

          <button type="button" id="refresh-db-stats-btn" class="secondary-btn">
            <span class="btn-icon">‚Üª</span> Refresh Stats
          </button>
        </section>

        <!-- Backup Section -->
        <section class="processing-section backup-section">
          <h3><span class="icon">üíæ</span> Backup</h3>
          <p class="section-description">Create a backup of Neo4j and PostgreSQL databases</p>
          <div class="backup-controls">
            <button type="button" id="create-backup-btn" class="process-btn">
              <span class="btn-icon">üíæ</span> Create Backup
            </button>
            <div id="backup-status" class="backup-status hidden">
              <span class="status-icon">‚úì</span>
              <span class="status-text">Backup created</span>
            </div>
          </div>
        </section>

        <!-- Migration Section -->
        <section class="processing-section migration-section">
          <h3><span class="icon">üì¶</span> Migrate S3 Structure</h3>
          <p class="section-description">Migrate images from old flat structure to new session/live folder structure</p>

          <div class="migration-status">
            <div class="migration-status-grid">
              <div class="migration-stat">
                <span class="migration-stat-label">Old Structure (originals/):</span>
                <span class="migration-stat-value" id="migration-old-count">--</span>
              </div>
              <div class="migration-stat">
                <span class="migration-stat-label">Live Folder:</span>
                <span class="migration-stat-value" id="migration-live-count">--</span>
              </div>
              <div class="migration-stat">
                <span class="migration-stat-label">Sessions:</span>
                <span class="migration-stat-value" id="migration-session-count">--</span>
              </div>
            </div>
            <button type="button" id="check-migration-btn" class="secondary-btn">
              <span class="btn-icon">üîç</span> Check Status
            </button>
          </div>

          <div class="migration-controls">
            <button type="button" id="preview-migration-btn" class="secondary-btn" disabled>
              <span class="btn-icon">üëÅÔ∏è</span> Preview Migration
            </button>
            <button type="button" id="run-migration-btn" class="process-btn" disabled>
              <span class="btn-icon">üì¶</span> Run Migration
            </button>
          </div>

          <div id="migration-preview" class="migration-preview hidden">
            <h4>Migration Preview</h4>
            <div class="migration-preview-stats">
              <span>Will move to Live: <strong id="preview-to-live">0</strong></span>
              <span>Will move to Legacy Session: <strong id="preview-to-legacy">0</strong></span>
              <span>Already in Live: <strong id="preview-already-live">0</strong></span>
            </div>
          </div>

          <div id="migration-result" class="migration-result hidden">
            <h4>Migration Complete</h4>
            <div class="migration-result-stats">
              <span class="succeeded">Moved to Live: <strong id="result-to-live">0</strong></span>
              <span>Moved to Legacy: <strong id="result-to-legacy">0</strong></span>
              <span class="failed">Errors: <strong id="result-errors">0</strong></span>
            </div>
          </div>
        </section>

        <!-- Reset & Process Section -->
        <section class="processing-section reset-section">
          <h3><span class="icon">‚ö†Ô∏è</span> Reset Database</h3>
          <p class="section-description">Archive live images, backup all data, then clear the database</p>

          <div class="reset-warning">
            <div class="warning-icon">‚ö†Ô∏è</div>
            <div class="warning-content">
              <strong>Warning:</strong> This operation will:
              <ol>
                <li>Archive all live images and metadata to a timestamped folder in S3</li>
                <li>Create a backup of all existing database data</li>
                <li>Delete all entities, relationships, and embeddings</li>
                <li>Clear the live images folder</li>
                <li>Reseed poster type definitions</li>
              </ol>
            </div>
          </div>

          <div class="reset-controls">
            <button type="button" id="reset-and-process-btn" class="danger-btn" disabled>
              <span class="btn-icon">üîÑ</span> Reset Database
            </button>
            <span class="reset-hint">Enabled when database has entities</span>
          </div>
        </section>

        <!-- Database Log -->
        <section class="processing-section db-log-section">
          <h3><span class="icon">üìã</span> Activity Log</h3>
          <div class="db-log" id="db-activity-log">
            <div class="db-log-empty">No recent activity</div>
          </div>
        </section>
      </div><!-- End Database Tab -->

      <!-- QA Validation Tab -->
      <div id="qa-validation-tab" class="tab-content hidden">
        <!-- Validation Overview Section -->
        <section class="processing-section qa-overview-section">
          <h2><span class="icon">üîç</span> QA Validation</h2>
          <p class="section-description">Validate extracted poster data against external sources (MusicBrainz, Discogs, TMDB)</p>
          <div class="qa-status-cards">
            <div class="qa-status-card">
              <span class="qa-status-value" id="qa-total-posters">--</span>
              <span class="qa-status-label">Total Posters</span>
            </div>
            <div class="qa-status-card validated">
              <span class="qa-status-value" id="qa-validated-count">--</span>
              <span class="qa-status-label">Validated</span>
            </div>
            <div class="qa-status-card warning">
              <span class="qa-status-value" id="qa-warning-count">--</span>
              <span class="qa-status-label">Warnings</span>
            </div>
            <div class="qa-status-card error">
              <span class="qa-status-value" id="qa-mismatch-count">--</span>
              <span class="qa-status-label">Mismatches</span>
            </div>
          </div>
        </section>

        <!-- Validation Configuration Section -->
        <section class="processing-section qa-config-section">
          <h2><span class="icon">‚öôÔ∏è</span> Validation Settings</h2>
          <div class="config-grid">
            <label>
              Poster Types
              <select id="qa-poster-types" multiple size="5">
                <option value="concert" selected>Concert</option>
                <option value="festival" selected>Festival</option>
                <option value="film" selected>Film</option>
                <option value="release" selected>Release</option>
                <option value="unknown" selected>Unknown (for type inference)</option>
                <option value="comedy">Comedy</option>
                <option value="theater">Theater</option>
                <option value="promo">Promo</option>
              </select>
            </label>
            <label>
              Validators
              <select id="qa-validators" multiple size="5">
                <option value="artist" selected>Artist (MusicBrainz/Discogs)</option>
                <option value="venue" selected>Venue (Location check)</option>
                <option value="date" selected>Date (Format validation)</option>
                <option value="release" selected>Release (Album/Film)</option>
                <option value="poster_type" selected>Poster Type (Type inference)</option>
              </select>
            </label>
            <label>
              Batch Size
              <select id="qa-batch-size">
                <option value="5">5 posters</option>
                <option value="10" selected>10 posters</option>
                <option value="25">25 posters</option>
                <option value="50">50 posters</option>
              </select>
            </label>
            <label>
              Min Confidence
              <select id="qa-confidence-threshold">
                <option value="0.5">50%</option>
                <option value="0.7" selected>70%</option>
                <option value="0.8">80%</option>
                <option value="0.9">90%</option>
              </select>
            </label>
          </div>
        </section>

        <!-- Validation Actions Section -->
        <section class="processing-section qa-actions-section">
          <div class="qa-action-buttons">
            <button type="button" id="qa-start-btn" class="process-btn">Start Validation</button>
            <button type="button" id="qa-check-health-btn" class="secondary-btn">Check API Health</button>
          </div>
          <div id="qa-api-health" class="qa-api-health hidden">
            <span class="health-item" id="health-musicbrainz">MusicBrainz: <span class="health-status">--</span></span>
            <span class="health-item" id="health-discogs">Discogs: <span class="health-status">--</span></span>
            <span class="health-item" id="health-tmdb">TMDB: <span class="health-status">--</span></span>
          </div>
        </section>

        <!-- Validation Progress Section (shown during validation) -->
        <section id="qa-progress-section" class="processing-section progress-section hidden">
          <h2><span class="icon">‚è≥</span> Validation Progress</h2>
          <div class="progress-bar">
            <div class="progress-fill" id="qa-progress-fill"></div>
          </div>
          <div class="progress-stats">
            <span>Progress: <strong id="qa-progress-percent">0%</strong></span>
            <span>Phase: <strong id="qa-progress-phase">Starting...</strong></span>
          </div>
          <div class="progress-log" id="qa-progress-log">
            <!-- Validation log entries will appear here -->
          </div>
          <div class="progress-actions">
            <button type="button" id="qa-cancel-btn" class="secondary-btn">Cancel Validation</button>
          </div>
        </section>

        <!-- Validation Results Section -->
        <section id="qa-results-section" class="processing-section qa-results-section hidden">
          <div class="qa-results-header">
            <h2><span class="icon">üìä</span> Validation Results</h2>
            <div class="qa-results-summary">
              <span>Overall Score: <strong id="qa-overall-score">--</strong></span>
            </div>
          </div>

          <!-- Filter Controls -->
          <div class="qa-filter-controls">
            <button type="button" class="qa-filter-btn active" data-filter="all">All</button>
            <button type="button" class="qa-filter-btn" data-filter="mismatch">Mismatches</button>
            <button type="button" class="qa-filter-btn" data-filter="warning">Warnings</button>
            <button type="button" class="qa-filter-btn" data-filter="validated">Validated</button>
          </div>

          <!-- Bulk Actions -->
          <div class="qa-bulk-actions">
            <button type="button" id="qa-select-all-btn">Select All Visible</button>
            <button type="button" id="qa-fix-selected-btn" class="process-btn" disabled>Fix Selected</button>
            <button type="button" id="qa-fix-all-btn" class="secondary-btn" disabled>Fix All Mismatches</button>
            <span class="selection-info">Selected: <strong id="qa-selected-count">0</strong></span>
          </div>

          <!-- Results Table -->
          <div class="qa-results-table-container">
            <table class="qa-results-table">
              <thead>
                <tr>
                  <th class="th-checkbox"><label class="sr-only" for="qa-select-all-checkbox">Select all</label><input type="checkbox" id="qa-select-all-checkbox" title="Select all"></th>
                  <th class="th-poster">Poster</th>
                  <th class="th-field">Field</th>
                  <th class="th-current">Current Value</th>
                  <th class="th-suggested">Suggested Value</th>
                  <th class="th-confidence">Confidence</th>
                  <th class="th-status">Status</th>
                  <th class="th-actions">Actions</th>
                </tr>
              </thead>
              <tbody id="qa-results-tbody">
                <!-- Validation results rendered here -->
              </tbody>
            </table>
          </div>

          <!-- Results Pagination -->
          <div class="qa-results-pagination">
            <button type="button" id="qa-results-prev-btn" disabled>Previous</button>
            <span id="qa-results-page-info">Page 1</span>
            <button type="button" id="qa-results-next-btn" disabled>Next</button>
          </div>
        </section>

        <!-- Top Issues Section -->
        <section id="qa-issues-section" class="processing-section qa-issues-section hidden">
          <h2><span class="icon">‚ö†Ô∏è</span> Top Issues</h2>
          <div id="qa-top-issues" class="qa-issues-list">
            <!-- Top issues will be rendered here -->
          </div>
        </section>
      </div><!-- End QA Validation Tab -->

      <!-- Preview Modal -->
      <div id="preview-modal" class="modal hidden">
        <div class="modal-content preview-modal-content">
          <button type="button" class="modal-close" id="preview-modal-close">&times;</button>
          <div class="preview-layout">
            <div class="preview-image-container">
              <img id="preview-image" src="" alt="Preview">
            </div>
            <div class="preview-results">
              <h3>Extraction Results</h3>
              <div id="preview-loading" class="preview-loading hidden">
                <div class="spinner"></div>
                <p>Processing image with vision model...</p>
              </div>
              <div id="preview-data" class="preview-data hidden">
                <!-- Extracted data fields will be rendered here -->
              </div>
              <div id="preview-error" class="preview-error hidden">
                <div class="error-icon">‚ö†Ô∏è</div>
                <p id="preview-error-message">Error message</p>
              </div>
            </div>
          </div>
          <div class="preview-actions">
            <span class="preview-info">Processing time: <strong id="preview-time">--</strong>ms | Model: <strong id="preview-model">--</strong></span>
            <div class="preview-buttons">
              <button type="button" id="preview-commit-btn" class="process-btn" disabled>Commit to Database</button>
              <button type="button" id="preview-close-btn" class="secondary-btn">Close</button>
            </div>
          </div>
        </div>
      </div>

    </main>

    <footer>
      <p>Poster Memento - Knowledge Graph Powered Poster Management</p>
    </footer>
  </div>

  <script type="module" src="js/app.js"></script>
  <script type="module" src="js/processing.js"></script>
  <script type="module" src="js/qa-validation.js"></script>
  <script type="module" src="js/tutorial.js"></script>
  <script type="module">
    // Initialize tutorial when DOM is ready and on processing tab
    import { tutorial } from './js/tutorial.js';

    document.addEventListener('DOMContentLoaded', () => {
      // Initialize tutorial system
      tutorial.init();
    });
  </script>
</body>
</html>
